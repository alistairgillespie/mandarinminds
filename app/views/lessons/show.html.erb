<% offset = current_user.timezone_offset %>
<% offset ||= 8 %>

<%= render "lessons/lessoncontent", lesson: @lesson, timezone_offset: offset %>

<script type="text/javascript">
  $(".lock").click(function(){
    var lock = $(this);
    var button = lock.prev().children();
    if (lock.hasClass("fa-lock")) {
      lock.removeClass("fa-lock");
      lock.addClass("fa-unlock-alt");
      button.removeAttr('disabled');  
    } else {
      lock.removeClass("fa-unlock-alt");
      lock.addClass("fa-lock");
      button.attr('disabled','disabled');   
    }
  });


  $('.lockable').hover(
    function() {
      if ($(this).children().attr("disabled") == "disabled") {
        $( this ).next().removeClass("fa-lock");
        $( this ).next().addClass("fa-unlock-alt");
      }
    }, function() {
      if ($(this).children().attr("disabled") == "disabled") {
        $( this ).next().removeClass("fa-unlock-alt");
        $( this ).next().addClass("fa-lock");
      }
    }
  );

  $('.edit-comment-btn').click(function(){
    var p = $(this).parent();
    p.hide();
    p.next().show();
  });

  $('.cancel-comment-edit-btn').click(function(){
    var p = $(this).parent().parent();
    p.hide();
    p.prev().show();
  });
</script>
